<!DOCTYPE html>
<html lang="hu">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta http-equiv="X-UA-Compatible" content="ie=edge">

		<title>Dakota közmondások</title>

		<link href="https://fonts.googleapis.com/css?family=Tillana:400,500,600,700,800&amp;subset=latin-ext" rel="stylesheet">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
		
		<style>
			* {
				margin: 0;
				padding: 0;
			}

			canvas {
				border: 1px solid black;
			}
		</style>
	</head>

	<body>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/4.7.0/pixi.min.js"></script>
		<script src="proverbs.js"></script>
		<script>
			let proverb = decodeURI(window.location.hash.substr(1));

			if (!proverb) {
				proverb = proverbs[2];
			}

			let app = new PIXI.Application({width: 1280, height: 720});
			let canvas = app.view;
			document.body.appendChild(canvas);
			PIXI.loader.add("background.jpg").load(setup);

			function setup() {
				console.log('setup');

				let sprite = new PIXI.Sprite(
					PIXI.loader.resources["background.jpg"].texture
				);

				app.stage.addChild(sprite);

				let textStyle = {
					fontFamily: 'Tillana',
					fontSize: 38,
					fontWeight: 'bold',
					fill: 0x000000,
					wordWrap: true,
					wordWrapWidth: 630,
					align : 'center'
				};

				let textfield = new PIXI.Text(proverb, textStyle);
				let rect = textfield.getBounds();
				textfield.x = 115 + (650 - rect.width) * 0.5;
				textfield.y = 130;
				app.stage.addChild(textfield);
				
				textStyle.fontSize = 18;
				textfield = new PIXI.Text('/Dakota hátrafelé nyilazók legfőbbika/', textStyle);
				textfield.x = 370;
				textfield.y = 400;
				app.stage.addChild(textfield);
				
				let meta = document.createElement('meta');
				meta.setAttribute('http-equiv', 'refresh');
				meta.setAttribute('content', '0; url=' + canvas.toDataURL('image/png').replace('image/png', 'image/octet-stream'));
				document.head.appendChild(meta);
			}
		</script>
	</body>
</html>
